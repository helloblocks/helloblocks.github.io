<!DOCTYPE html>
<html lang="es">

<head>
    <link rel="shortcut icon" href="/web/favicon.ico" type="image/x-icon" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Description" content="RobÃ³tica educativa, Education Robotics, Arduino, ESP8266, NodeMcu, Wemos">

    <meta name="csrf-param" content="_csrf">
    <meta name="csrf-token" content="Se0_wuodldVOGkgPak9EBYVWGSxjEsfBIrqptwYQ8BsmuFKOtUrPoH9pPz4SODRk9CZNbSR0sqZTifqDNES9cg==">
    <title>ArduinoBlocks </title>

    <link href="/web/assets/cda3038f/css/bootstrap.css" rel="stylesheet">
    <link href="/web/css/site.css" rel="stylesheet">
    <link href="/web/assets/7b62b9ec/stylesheets/language-picker.min.css" rel="stylesheet">
    <link href="/web/assets/7b62b9ec/stylesheets/flags-small.min.css" rel="stylesheet">
    <script src="/web/assets/22a8963f/jquery.js"></script>
    <script src="/web/assets/6009c610/yii.js"></script>
</head>

<body>



    <!-- main content fill full screen and padding para navbar-->
    <div class="container-fluid ablocks-fill-and-pad">

        <div class="ablocks-fill-and-pad">
            <center>

                <h1>LCD -Symbol editor</h1>
                <br>
                <!-- //start editor -->

                <script>
                    var pixels = new Array(40); //max 5x8
                    var colorsel = '00FF00';
                    var coloroff = '000000';
                    var rows = 8;
                    var cols = 5;

                    $(document).ready(function() {
                        init();
                    });

                    function init() {
                        document.addEventListener('contextmenu', event => event.preventDefault());

                        var canvas = document.getElementById('canvas');
                        canvas.addEventListener('mousedown', clickMatrix, false);

                        for (i = 0; i < (rows * cols); i++) pixels[i] = '000000';
                        drawMatrix();
                    }

                    function updateColor(jscolor) {
                        colorsel = jscolor;
                    }

                    function clickMatrix(event) {
                        var canvas = document.getElementById('canvas');
                        var x = event.pageX - canvas.offsetLeft;
                        var y = event.pageY - canvas.offsetTop;

                        var cellw = 240 / cols;
                        var cellh = 320 / rows;

                        var fila = Math.floor(y / cellh);
                        var col = Math.floor(x / cellw);

                        if (event.button === 0) {
                            if (pixels[(fila * cols) + col] == colorsel) {
                                pixels[(fila * cols) + col] = new String(coloroff);
                            } else {
                                pixels[(fila * cols) + col] = new String(colorsel);
                            }
                        }
                        drawMatrix();
                    }

                    function drawMatrix() {

                        var code = '';

                        var canvas = document.getElementById('canvas');
                        var ta = document.getElementById('tacode');

                        if (canvas.getContext) {
                            var ctx = canvas.getContext('2d');
                            ctx.clearRect(0, 0, 240, 320);

                            var cellw = 240 / cols;
                            var cellh = 320 / rows;

                            for (i = 0; i < rows; i++) {
                                code += 'B';
                                for (j = 0; j < cols; j++) {
                                    ctx.fillStyle = '#' + pixels[(i * cols) + j];
                                    ctx.fillRect(j * cellw, i * cellh, cellw - 2, cellh - 2);

                                    if (pixels[(i * cols) + j] != 0x000000) {
                                        code += '1';
                                    } else {
                                        code += '0';
                                    }
                                }
                                if (i != (rows - 1)) code = code + ',';
                            }
                        }
                        tacode.value = code;
                    }

                    function clearMatrix() {
                        for (i = 0; i < (rows * cols); i++) {
                            pixels[i] = new String(coloroff);
                        }
                        drawMatrix();
                    }

                    function fillMatrix() {
                        for (i = 0; i < (rows * cols); i++) {
                            pixels[i] = new String(colorsel);
                        }
                        drawMatrix();
                    }

                    function copyCode() {
                        var ta = document.getElementById('tacode');
                        ta.select();
                        document.execCommand("Copy");
                        alert("Copied to clipboard!");
                    }
                </script>

                <script type="text/javascript" src="/web/js/jscolor.js"></script>

                <canvas id="canvas" width="240" height="320"></canvas>
                <br>
                <button onclick="clearMatrix()">Clear</button>
                <button onclick="fillMatrix()">Fill</button>
                <button onclick="copyCode()">Copy data: </button>
                <br><br>
                <textarea id="tacode" rows="2" cols="80" readonly="true"></textarea>
                <br><br><br><br>

                <!-- //container -->
            </center>
        </div>
        <br><br>
    </div>

    <!-- status info -->
    <script type="text/javascript">
        function setStatus(_s) {
            $('#estado').html(_s);
            $('#estado').fadeIn();
            setTimeout(function() {
                $('#estado').fadeOut();
            }, 5000);
        }
    </script>

    <!-- google analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-90098278-1', 'auto');
        ga('send', 'pageview');
    </script>

    <!--end-->
    <script src="/web/assets/7b62b9ec/javascripts/language-picker.min.js"></script>
    <script src="/web/assets/cda3038f/js/bootstrap.js"></script>
</body>

</html>
